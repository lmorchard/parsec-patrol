var mocha=require("../"),Context=mocha.Context,Suite=mocha.Suite,Test=mocha.Test;describe("Suite",function(){describe(".clone()",function(){beforeEach(function(){this.suite=new Suite("To be cloned"),this.suite._timeout=3043,this.suite._slow=101,this.suite._bail=!0,this.suite.suites.push(1),this.suite.tests.push("hello"),this.suite._beforeEach.push(2),this.suite._beforeAll.push(3),this.suite._afterEach.push(4),this.suite._afterAll.push(5)}),it("should copy the title",function(){this.suite.clone().title.should.equal("To be cloned")}),it("should copy the timeout value",function(){this.suite.clone().timeout().should.equal(3043)}),it("should copy the slow value",function(){this.suite.clone().slow().should.equal(101)}),it("should copy the bail value",function(){this.suite.clone().bail().should.be.true}),it("should not copy the values from the suites array",function(){this.suite.clone().suites.should.be.empty}),it("should not copy the values from the tests array",function(){this.suite.clone().tests.should.be.empty}),it("should not copy the values from the _beforeEach array",function(){this.suite.clone()._beforeEach.should.be.empty}),it("should not copy the values from the _beforeAll array",function(){this.suite.clone()._beforeAll.should.be.empty}),it("should not copy the values from the _afterEach array",function(){this.suite.clone()._afterEach.should.be.empty}),it("should not copy the values from the _afterAll array",function(){this.suite.clone()._afterAll.should.be.empty})}),describe(".timeout()",function(){beforeEach(function(){this.suite=new Suite("A Suite")}),describe("when no argument is passed",function(){it("should return the timeout value",function(){this.suite.timeout().should.equal(2e3)})}),describe("when argument is passed",function(){it("should return the Suite object",function(){var e=this.suite.timeout(5e3);e.timeout().should.equal(5e3)})})}),describe(".slow()",function(){beforeEach(function(){this.suite=new Suite("A Suite")}),describe("when given a string",function(){it("should parse it",function(){this.suite.slow("5 seconds"),this.suite.slow().should.equal(5e3)})}),describe("when no argument is passed",function(){it("should return the slow value",function(){this.suite.slow().should.equal(75)})}),describe("when argument is passed",function(){it("should return the Suite object",function(){var e=this.suite.slow(5e3);e.slow().should.equal(5e3)})})}),describe(".bail()",function(){beforeEach(function(){this.suite=new Suite("A Suite"),this.suite._bail=!0}),describe("when no argument is passed",function(){it("should return the bail value",function(){this.suite.bail().should.be.true})}),describe("when argument is passed",function(){it("should return the Suite object",function(){var e=this.suite.bail(!1);e.bail().should.be.false})})}),describe(".beforeAll()",function(){beforeEach(function(){this.suite=new Suite("A Suite")}),describe("wraps the passed in function in a Hook",function(){it("adds it to _beforeAll",function(){function e(){}this.suite.beforeAll(e),this.suite._beforeAll.should.have.length(1);var t=this.suite._beforeAll[0];t.title.should.equal('"before all" hook'),t.fn.should.equal(e)})})}),describe(".afterAll()",function(){beforeEach(function(){this.suite=new Suite("A Suite")}),describe("wraps the passed in function in a Hook",function(){it("adds it to _afterAll",function(){function e(){}this.suite.afterAll(e),this.suite._afterAll.should.have.length(1);var t=this.suite._afterAll[0];t.title.should.equal('"after all" hook'),t.fn.should.equal(e)})})}),describe(".beforeEach()",function(){beforeEach(function(){this.suite=new Suite("A Suite")}),describe("wraps the passed in function in a Hook",function(){it("adds it to _beforeEach",function(){function e(){}this.suite.beforeEach(e),this.suite._beforeEach.should.have.length(1);var t=this.suite._beforeEach[0];t.title.should.equal('"before each" hook'),t.fn.should.equal(e)})})}),describe(".afterEach()",function(){beforeEach(function(){this.suite=new Suite("A Suite")}),describe("wraps the passed in function in a Hook",function(){it("adds it to _afterEach",function(){function e(){}this.suite.afterEach(e),this.suite._afterEach.should.have.length(1);var t=this.suite._afterEach[0];t.title.should.equal('"after each" hook'),t.fn.should.equal(e)})})}),describe(".addSuite()",function(){beforeEach(function(){this.first=new Suite("First suite"),this.first.timeout(4002),this.first.slow(200),this.second=new Suite("Second suite"),this.first.addSuite(this.second)}),it("sets the parent on the added Suite",function(){this.second.parent.should.equal(this.first)}),it("copies the timeout value",function(){this.second.timeout().should.equal(4002)}),it("copies the slow value",function(){this.second.slow().should.equal(200)}),it("adds the suite to the suites collection",function(){this.first.suites.should.have.length(1),this.first.suites[0].should.equal(this.second)})}),describe(".fullTitle()",function(){beforeEach(function(){this.suite=new Suite("A Suite")}),describe("when there is no parent",function(){it("returns the suite title",function(){this.suite.fullTitle().should.equal("A Suite")})}),describe("when there is a parent",function(){it("returns the combination of parent's and suite's title",function(){var e=new Suite("I am a parent");e.addSuite(this.suite),this.suite.fullTitle().should.equal("I am a parent A Suite")})})}),describe(".total()",function(){beforeEach(function(){this.suite=new Suite("A Suite")}),describe("when there are no nested suites or tests",function(){it("should return 0",function(){this.suite.total().should.equal(0)})}),describe("when there are several tests in the suite",function(){it("should return the number",function(){this.suite.addTest(new Test("a child test")),this.suite.addTest(new Test("another child test")),this.suite.total().should.equal(2)})})}),describe(".eachTest(fn)",function(){beforeEach(function(){this.suite=new Suite("A Suite")}),describe("when there are no nested suites or tests",function(){it("should return 0",function(){function t(){e++}var e=0;this.suite.eachTest(t),e.should.equal(0)})}),describe("when there are several tests in the suite",function(){it("should return the number",function(){function t(){e++}this.suite.addTest(new Test("a child test")),this.suite.addTest(new Test("another child test"));var e=0;this.suite.eachTest(t),e.should.equal(2)})}),describe("when there are several levels of nested suites",function(){it("should return the number",function(){function n(){t++}this.suite.addTest(new Test("a child test"));var e=new Suite("a child suite");e.addTest(new Test("a test in a child suite")),this.suite.addSuite(e);var t=0;this.suite.eachTest(n),t.should.equal(2)})})})});