function parse(e){return parseRequires(parseInheritance(e))}function parseRequires(e){return e.replace(/require\('events'\)/g,"require('browser/events')").replace(/require\('debug'\)/g,"require('browser/debug')").replace(/require\('path'\)/g,"require('browser/path')").replace(/require\('diff'\)/g,"require('browser/diff')").replace(/require\('tty'\)/g,"require('browser/tty')").replace(/require\('fs'\)/g,"require('browser/fs')")}function parseInheritance(e){return e.replace(/^ *(\w+)\.prototype\.__proto__ * = *(\w+)\.prototype *;?/gm,function(e,t,n){return"function F(){};\nF.prototype = "+n+".prototype;\n"+t+".prototype = new F;\n"+t+".prototype.constructor = "+t+";\n"})}function compile(){var e="";e+="\n// CommonJS require()\n\n",e+=browser.require+"\n\n",e+="require.modules = {};\n\n",e+="require.resolve = "+browser.resolve+";\n\n",e+="require.register = "+browser.register+";\n\n",e+="require.relative = "+browser.relative+";\n\n",args.forEach(function(t){var n=files[t];t=t.replace("lib/",""),e+='\nrequire.register("'+t+'", function(module, exports, require){\n',e+=n,e+="\n}); // module: "+t+"\n"}),fs.writeFile("_mocha.js",e,function(e){if(e)throw e;console.log("  [90m create : [0m[36m%s[0m","mocha.js"),console.log()})}var fs=require("fs"),args=process.argv.slice(2),pending=args.length,files={};console.log(""),args.forEach(function(e){var t=e.replace("lib/","");fs.readFile(e,"utf8",function(t,n){if(t)throw t;console.log("  [90mcompile : [0m[36m%s[0m",e),files[e]=~n.indexOf("require: off")?n:parse(n),--pending||compile()})});var browser={require:function e(t){var n=e.resolve(t),r=e.modules[n];if(!r)throw new Error('failed to require "'+t+'"');return r.exports||(r.exports={},r.call(r.exports,r,r.exports,e.relative(n))),r.exports},resolve:function(e){var t=e,n=e+".js",r=e+"/index.js";return require.modules[n]&&n||require.modules[r]&&r||t},relative:function(e){return function(t){if("."!=t.charAt(0))return require(t);var n=e.split("/"),r=t.split("/");n.pop();for(var i=0;i<r.length;i++){var s=r[i];".."==s?n.pop():"."!=s&&n.push(s)}return require(n.join("/"))}},register:function(e,t){require.modules[e]=t}};