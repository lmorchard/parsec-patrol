function Runnable(e,t){this.title=e,this.fn=t,this.async=t&&t.length,this.sync=!this.async,this._timeout=2e3,this._slow=75,this.timedOut=!1}var EventEmitter=require("events").EventEmitter,debug=require("debug")("mocha:runnable"),milliseconds=require("./ms"),Date=global.Date,setTimeout=global.setTimeout,setInterval=global.setInterval,clearTimeout=global.clearTimeout,clearInterval=global.clearInterval,toString=Object.prototype.toString;module.exports=Runnable,Runnable.prototype.__proto__=EventEmitter.prototype,Runnable.prototype.timeout=function(e){return 0==arguments.length?this._timeout:("string"==typeof e&&(e=milliseconds(e)),debug("timeout %d",e),this._timeout=e,this.timer&&this.resetTimeout(),this)},Runnable.prototype.slow=function(e){return 0===arguments.length?this._slow:("string"==typeof e&&(e=milliseconds(e)),debug("timeout %d",e),this._slow=e,this)},Runnable.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title},Runnable.prototype.clearTimeout=function(){clearTimeout(this.timer)},Runnable.prototype.inspect=function(){return JSON.stringify(this,function(e,t){if("_"==e[0])return;return"parent"==e?"#<Suite>":"ctx"==e?"#<Context>":t},2)},Runnable.prototype.resetTimeout=function(){var e=this,t=this.timeout();this.clearTimeout(),t&&(this.timer=setTimeout(function(){e.callback(new Error("timeout of "+t+"ms exceeded")),e.timedOut=!0},t))},Runnable.prototype.run=function(e){function u(e){if(o)return;o=!0,t.emit("error",e||new Error("done() called multiple times"))}function a(n){if(t.timedOut)return;if(s)return u(n);t.clearTimeout(),t.duration=new Date-r,s=!0,e(n)}var t=this,n=this.timeout(),r=new Date,i=this.ctx,s,o;i&&i.runnable(this),this.async&&n&&(this.timer=setTimeout(function(){a(new Error("timeout of "+n+"ms exceeded")),t.timedOut=!0},n)),this.callback=a;if(this.async){try{this.fn.call(i,function(e){if(e instanceof Error||toString.call(e)==="[object Error]")return a(e);if(null!=e)return a(new Error("done() invoked with non-Error: "+e));a()})}catch(f){a(f)}return}if(this.asyncOnly)return a(new Error("--async-only option in use without declaring `done()`"));try{this.pending||this.fn.call(i),this.duration=new Date-r,e()}catch(f){e(f)}};