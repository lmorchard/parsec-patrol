function NyanCat(e){Base.call(this,e);var t=this,n=this.stats,r=Base.window.width*.75|0,i=this.rainbowColors=t.generateColors(),s=this.colorIndex=0,o=this.numberOfLines=4,u=this.trajectories=[[],[],[],[]],a=this.nyanCatWidth=11,f=this.trajectoryWidthMax=r-a,l=this.scoreboardWidth=5,c=this.tick=0,h=0;e.on("start",function(){Base.cursor.hide(),t.draw("start")}),e.on("pending",function(e){t.draw("pending")}),e.on("pass",function(e){t.draw("pass")}),e.on("fail",function(e,n){t.draw("fail")}),e.on("end",function(){Base.cursor.show();for(var e=0;e<t.numberOfLines;e++)write("\n");t.epilogue()})}function write(e){process.stdout.write(e)}var Base=require("./base"),color=Base.color;exports=module.exports=NyanCat,NyanCat.prototype.draw=function(e){this.appendRainbow(),this.drawScoreboard(),this.drawRainbow(),this.drawNyanCat(e),this.tick=!this.tick},NyanCat.prototype.drawScoreboard=function(){function n(e,t){write(" "),write("["+e+"m"+t+"[0m"),write("\n")}var e=this.stats,t=Base.colors;n(t.green,e.passes),n(t.fail,e.failures),n(t.pending,e.pending),write("\n"),this.cursorUp(this.numberOfLines)},NyanCat.prototype.appendRainbow=function(){var e=this.tick?"_":"-",t=this.rainbowify(e);for(var n=0;n<this.numberOfLines;n++){var r=this.trajectories[n];r.length>=this.trajectoryWidthMax&&r.shift(),r.push(t)}},NyanCat.prototype.drawRainbow=function(){var e=this;this.trajectories.forEach(function(t,n){write("["+e.scoreboardWidth+"C"),write(t.join("")),write("\n")}),this.cursorUp(this.numberOfLines)},NyanCat.prototype.drawNyanCat=function(e){var t=this,n=this.scoreboardWidth+this.trajectories[0].length,r="["+n+"C",i="";write(r),write("_,------,"),write("\n"),write(r),i=t.tick?"  ":"   ",write("_|"+i+"/\\_/\\ "),write("\n"),write(r),i=t.tick?"_":"__";var s=t.tick?"~":"^",o;switch(e){case"pass":o="( ^ .^)";break;case"fail":o="( o .o)";break;default:o="( - .-)"}write(s+"|"+i+o+" "),write("\n"),write(r),i=t.tick?" ":"  ",write(i+'""  "" '),write("\n"),this.cursorUp(this.numberOfLines)},NyanCat.prototype.cursorUp=function(e){write("["+e+"A")},NyanCat.prototype.cursorDown=function(e){write("["+e+"B")},NyanCat.prototype.generateColors=function(){var e=[];for(var t=0;t<42;t++){var n=Math.floor(Math.PI/3),r=t*(1/6),i=Math.floor(3*Math.sin(r)+3),s=Math.floor(3*Math.sin(r+2*n)+3),o=Math.floor(3*Math.sin(r+4*n)+3);e.push(36*i+6*s+o+16)}return e},NyanCat.prototype.rainbowify=function(e){var t=this.rainbowColors[this.colorIndex%this.rainbowColors.length];return this.colorIndex+=1,"[38;5;"+t+"m"+e+"[0m"},NyanCat.prototype.__proto__=Base.prototype;