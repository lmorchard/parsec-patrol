function Markdown(e){function s(e){return Array(r).join("#")+" "+e}function o(){return Array(r).join("  ")}function u(e,t){var n=t;return t=t[e.title]=t[e.title]||{suite:e},e.suites.forEach(function(e){u(e,t)}),n}function a(e,t){++t;var n="",r;for(var i in e){if("suite"==i)continue;i&&(r=" - ["+i+"](#"+utils.slug(e[i].suite.fullTitle())+")\n"),i&&(n+=Array(t).join("  ")+r),n+=a(e[i],t)}return--t,n}function f(e){var t=u(e,{});return a(t,0)}Base.call(this,e);var t=this,n=this.stats,r=0,i="";f(e.suite),e.on("suite",function(e){++r;var t=utils.slug(e.fullTitle());i+='<a name="'+t+'"></a>'+"\n",i+=s(e.title)+"\n"}),e.on("suite end",function(e){--r}),e.on("pass",function(e){var t=utils.clean(e.fn.toString());i+=e.title+".\n",i+="\n```js\n",i+=t+"\n",i+="```\n\n"}),e.on("end",function(){process.stdout.write("# TOC\n"),process.stdout.write(f(e.suite)),process.stdout.write(i)})}var Base=require("./base"),utils=require("../utils");exports=module.exports=Markdown;