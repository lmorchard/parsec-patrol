function ignored(e){return!~ignore.indexOf(e)}function highlight(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew *(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}var fs=require("fs"),path=require("path"),join=path.join,debug=require("debug")("mocha:watch"),ignore=["node_modules",".git"];exports.escape=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},exports.forEach=function(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r)},exports.indexOf=function(e,t,n){for(var r=n||0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},exports.reduce=function(e,t,n){var r=n;for(var i=0,s=e.length;i<s;i++)r=t(r,e[i],i,e);return r},exports.filter=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var s=e[r];t(s,r,e)&&n.push(s)}return n},exports.keys=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t},exports.watch=function(e,t){var n={interval:100};e.forEach(function(e){debug("file %s",e),fs.watchFile(e,n,function(n,r){r.mtime<n.mtime&&t(e)})})},exports.files=function(e,t){return t=t||[],fs.readdirSync(e).filter(ignored).forEach(function(n){n=join(e,n),fs.statSync(n).isDirectory()?exports.files(n,t):n.match(/\.(js|coffee)$/)&&t.push(n)}),t},exports.slug=function(e){return e.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")},exports.clean=function(e){e=e.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var t=e.match(/^\n?( *)/)[1].length,n=new RegExp("^ {"+t+"}","gm");return e=e.replace(n,""),exports.trim(e)},exports.escapeRegexp=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},exports.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},exports.parseQuery=function(e){return exports.reduce(e.replace("?","").split("&"),function(e,t){var n=t.indexOf("="),r=t.slice(0,n),i=t.slice(++n);return e[r]=decodeURIComponent(i),e},{})},exports.highlightTags=function(e){var t=document.getElementsByTagName(e);for(var n=0,r=t.length;n<r;++n)t[n].innerHTML=highlight(t[n].innerHTML)};