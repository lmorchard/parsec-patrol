function Suite(e,t){this.title=e,this.ctx=t,this.suites=[],this.tests=[],this.pending=!1,this._beforeEach=[],this._beforeAll=[],this._afterEach=[],this._afterAll=[],this.root=!e,this._timeout=2e3,this._slow=75,this._bail=!1}var EventEmitter=require("events").EventEmitter,debug=require("debug")("mocha:suite"),milliseconds=require("./ms"),utils=require("./utils"),Hook=require("./hook");exports=module.exports=Suite,exports.create=function(e,t){var n=new Suite(t,e.ctx);return n.parent=e,e.pending&&(n.pending=!0),t=n.fullTitle(),e.addSuite(n),n},Suite.prototype.__proto__=EventEmitter.prototype,Suite.prototype.clone=function(){var e=new Suite(this.title);return debug("clone"),e.ctx=this.ctx,e.timeout(this.timeout()),e.slow(this.slow()),e.bail(this.bail()),e},Suite.prototype.timeout=function(e){return 0==arguments.length?this._timeout:("string"==typeof e&&(e=milliseconds(e)),debug("timeout %d",e),this._timeout=parseInt(e,10),this)},Suite.prototype.slow=function(e){return 0===arguments.length?this._slow:("string"==typeof e&&(e=milliseconds(e)),debug("slow %d",e),this._slow=e,this)},Suite.prototype.bail=function(e){return 0==arguments.length?this._bail:(debug("bail %s",e),this._bail=e,this)},Suite.prototype.beforeAll=function(e){if(this.pending)return this;var t=new Hook('"before all" hook',e);return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.ctx=this.ctx,this._beforeAll.push(t),this.emit("beforeAll",t),this},Suite.prototype.afterAll=function(e){if(this.pending)return this;var t=new Hook('"after all" hook',e);return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.ctx=this.ctx,this._afterAll.push(t),this.emit("afterAll",t),this},Suite.prototype.beforeEach=function(e){if(this.pending)return this;var t=new Hook('"before each" hook',e);return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.ctx=this.ctx,this._beforeEach.push(t),this.emit("beforeEach",t),this},Suite.prototype.afterEach=function(e){if(this.pending)return this;var t=new Hook('"after each" hook',e);return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.ctx=this.ctx,this._afterEach.push(t),this.emit("afterEach",t),this},Suite.prototype.addSuite=function(e){return e.parent=this,e.timeout(this.timeout()),e.slow(this.slow()),e.bail(this.bail()),this.suites.push(e),this.emit("suite",e),this},Suite.prototype.addTest=function(e){return e.parent=this,e.timeout(this.timeout()),e.slow(this.slow()),e.ctx=this.ctx,this.tests.push(e),this.emit("test",e),this},Suite.prototype.fullTitle=function(){if(this.parent){var e=this.parent.fullTitle();if(e)return e+" "+this.title}return this.title},Suite.prototype.total=function(){return utils.reduce(this.suites,function(e,t){return e+t.total()},0)+this.tests.length},Suite.prototype.eachTest=function(e){return utils.forEach(this.tests,e),utils.forEach(this.suites,function(t){t.eachTest(e)}),this};