/**
 * @license Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

function mkDir(e){fs.existsSync(e)||fs.mkdirSync(e,511)}function mkFullDir(e){var t=e.split("/"),n="",r=!0;t.forEach(function(e){n+=e+"/",r=!1,e&&mkDir(n)})}var fs=require("fs"),path=require("path"),file,prop;file={backSlashRegExp:/\\/g,getLineSeparator:function(){return"/"},exists:function(e){return fs.existsSync(e)},parent:function(e){var t=e.split("/");return t.pop(),t.join("/")},absPath:function(e){return path.normalize(fs.realpathSync(e).replace(/\\/g,"/"))},normalize:function(e){return path.normalize(e)},isFile:function(e){return fs.statSync(e).isFile()},isDirectory:function(e){return fs.statSync(e).isDirectory()},getFilteredFileList:function(e,t,n){var r=[],i,s,o,u,a,f,l,c,h,p;i=e,s=t.include||t,o=t.exclude||null;if(fs.existsSync(i)){u=fs.readdirSync(i);for(a=0;a<u.length;a++)p=u[a],l=path.join(i,p),f=fs.statSync(l),f.isFile()?(n&&l.indexOf("/")===-1&&(l=l.replace(/\\/g,"/")),c=!0,s&&(c=l.match(s)),c&&o&&(c=!l.match(o)),c&&!p.match(/^\./)&&r.push(l)):f.isDirectory()&&!p.match(/^\./)&&(h=this.getFilteredFileList(l,t,n),r.push.apply(r,h))}return r},copyDir:function(e,t,n,r){n=n||/\w/;var i=file.getFilteredFileList(e,n,!0),s=[],o,u,a;for(o=0;o<i.length;o++)u=i[o],a=u.replace(e,t),file.copyFile(u,a,r)&&s.push(a);return s.length?s:null},copyFile:function(e,t,n){var r;return n&&fs.existsSync(t)&&fs.statSync(t).mtime.getTime()>=fs.statSync(e).mtime.getTime()?!1:(r=path.dirname(t),fs.existsSync(r)||mkFullDir(r),fs.writeFileSync(t,fs.readFileSync(e,"binary"),"binary"),!0)},readFile:function(e,t){return t==="utf-8"&&(t="utf8"),t||(t="utf8"),fs.readFileSync(e,t)},saveUtf8File:function(e,t){file.saveFile(e,t,"utf8")},saveFile:function(e,t,n){var r;n==="utf-8"&&(n="utf8"),n||(n="utf8"),r=path.dirname(e),fs.existsSync(r)||mkFullDir(r),fs.writeFileSync(e,t,n)},deleteFile:function(e){var t,n,r;if(fs.existsSync(e)){r=fs.statSync(e);if(r.isDirectory()){t=fs.readdirSync(e);for(n=0;n<t.length;n++)this.deleteFile(path.join(e,t[n]));fs.rmdirSync(e)}else fs.unlinkSync(e)}}};for(prop in file)file.hasOwnProperty(prop)&&(exports[prop]=file[prop]);