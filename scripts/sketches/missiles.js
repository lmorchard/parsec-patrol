(function(){define(["worlds","entities","components","systems","pubsub","jquery","underscore","Vector2D","utils","dat"],function(e,t,n,r,i,s,o,u,a,f){var l,c,h,p,d,v,m,g,y,b,w,E,S=this;return y={max_enemies:100,respawn_enemies:!0},d=document.getElementById("gameCanvas"),l=document.getElementById("gameArea"),E=new e.World(2e3,2e3,w=new r.ViewportSystem(window,l,d,1,1,3),new r.RadarSystem(d,.28),new r.PointerInputSystem(d),new r.ClickCourseSystem,new r.SpawnSystem,new r.SpinSystem,new r.OrbiterSystem,new r.SeekerSystem,new r.ThrusterSystem,new r.HealthSystem,new r.BeamWeaponSystem,new r.MissileWeaponSystem,new r.VaporTrailSystem,new r.ExplosionSystem),E.measure_fps=!0,window.C=n,window.E=t,window.W=e,window.world=E,window.vp=w,m=E.entities,E.load(v={entities:{sun:{Sprite:{shape:"star"},Spawn:{position_logic:"center"},RadarPing:{color:"#ff0"},Position:{}},hero:{TypeName:{name:"HeroShip"},Sprite:{shape:"hero"},Position:{},Collidable:{},Spawn:{x:200,y:0},Thruster:{dv:250,max_v:100,active:!1},Seeker:{rad_per_sec:Math.PI},ClickCourse:{stop_on_arrival:!0},Health:{max:"20000"},RadarPing:{color:"#0f0"},WeaponsTarget:{team:"commonwealth"},BeamWeapon:{max_beams:15,active_beams:10,max_range:1250,max_power:4500,charge_rate:4500,discharge_rate:4500,color:"#33f",target_team:"invaders"},Tombstone:{load:{Position:{},Explosion:{ttl:5,radius:70,max_particles:50,max_particle_size:1.5,max_velocity:300,color:"#fff"},Spawn:{capture_camera:!0}}}},cruiser:{TypeName:{name:"EnemyCruiser"},Sprite:{shape:"enemycruiser",width:50,height:50,stroke_style:"#f33"},Position:{},Collidable:{},Spin:{rad_per_sec:Math.PI/16},Spawn:{x:-200,y:0,rotation:Math.PI/2},Thruster:{dv:50,max_v:100,active:!1},Seeker:{rad_per_sec:Math.PI},Health:{max:"20000"},RadarPing:{color:"#f33",size:8},WeaponsTarget:{team:"invaders"},MissileWeapon:{target_team:"commonwealth",max_turrets:50,active_turrets:20,loading_time:3,target_range:1e3,missile:{health:70,damage:1e3,speed:125,ttl:6,color:"#f00",error:0,rad_per_sec:Math.PI*1.75,acquisition_delay:.75}},Tombstone:{load:{Position:{},Explosion:{ttl:5,radius:70,max_particles:50,max_particle_size:1.5,max_velocity:300,color:"#33f"}}}}},groups:{main:["sun","hero","cruiser"]},current_scene:"main"}),h=E.entities.get("hero",n.BeamWeapon),p=E.entities.get("hero",n.Health),c=E.entities.get("cruiser",n.MissileWeapon),b={enemy_ct:0},E.subscribe(r.SpawnSystem.MSG_DESPAWN,function(e,t){var r,i;i=m.get(t.entity_id,n.TypeName);if((i!=null?i.name:void 0)==="HeroShip")return r=function(){return location.reload()},setTimeout(r,5e3)}),g=new f.GUI,g.add(w,"use_sprite_cache"),g.add(w,"zoom",1,15).step(.25),g.add(h,"active_beams",1,15).step(1),g.add(c,"active_turrets",1,50).step(1),function(){return E.start()}})}).call(this);