(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["worlds","entities","components","systems","pubsub","jquery","underscore"],function(e,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m,g;return h=document.getElementById("gameCanvas"),c=document.getElementById("gameArea"),a=function(e){function n(){return v=n.__super__.constructor.apply(this,arguments),v}return t(n,e),n.defaults={type:"PointerFollower"},n}(r.Component),r.PointerFollower=a,f=function(e){function n(){return m=n.__super__.constructor.apply(this,arguments),m}return t(n,e),n.prototype.match_component=a,n.prototype.update_match=function(e,t,n){var i;return i=this.world.entities.get(t,r.Position),i.x=this.world.inputs.pointer_world_x,i.y=this.world.inputs.pointer_world_y},n}(i.System),l=function(e){function n(){return g=n.__super__.constructor.apply(this,arguments),g}return t(n,e),n.prototype.update=function(e){return o("#out").val(JSON.stringify(this.world.save()))},n}(i.System),d=new e.World(3e3,3e3,p=new i.ViewportSystem(window,c,h,1,1,5),new i.RadarSystem(h,.28),new i.PointerInputSystem(h),new i.ClickCourseSystem,new i.SpawnSystem,new i.OrbiterSystem,new i.SeekerSystem,new i.ThrusterSystem,new i.HealthSystem,new i.BeamWeaponSystem,new i.ExplosionSystem,new f),o("#save").click(function(){return o("#out").val(JSON.stringify(d.save())),!1}),o("#load").click(function(){return d.load(JSON.parse(o("#out").val())),!1}),o("#sample1").click(function(){return o.getJSON("json-sample1.json",function(e,t,n){return d.load(e)}),!1}),o("#sample2").click(function(){return o.getJSON("json-sample2.json",function(e,t,n){return d.load(e)}),!1}),o("#sample3").click(function(){return o.getJSON("json-sample3.json",function(e,t,n){return d.load(e)}),!1}),o("#sample4").click(function(){return o.getJSON("json-sample4.json",function(e,t,n){return d.load(e)}),!1}),window.world=d,window.C=r,window.E=n,window.S=i,o.getJSON("json-sample1.json",function(e,t,n){return d.load(e),d.measure_fps=!0,d.start()})})}).call(this);