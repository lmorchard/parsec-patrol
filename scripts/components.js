(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["entities","underscore"],function(e,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z;return u=function(){function e(e){var t,r,i;e==null&&(e={}),r=n.defaults(e,this.constructor.defaults);for(t in r)i=r[t],this[t]=n.isFunction(i)?i():i}return e.prototype.toString=function(){return""+this.type+": "+JSON.stringify(this)},e}(),T=function(e){function n(){return k=n.__super__.constructor.apply(this,arguments),k}return t(n,e),n.defaults={type:"TypeName",name:""},n}(u),a=function(e){function n(){return L=n.__super__.constructor.apply(this,arguments),L}return t(n,e),n.defaults={type:"EntityName",name:""},n}(u),v=function(e){function n(){return B=n.__super__.constructor.apply(this,arguments),B}return t(n,e),n.defaults={type:"Position",x:0,y:0,rotation:0},n}(u),p=function(e){function n(){return j=n.__super__.constructor.apply(this,arguments),j}return t(n,e),n.defaults={type:"Motion",dx:0,dy:0,drotation:0},n}(u),S=function(e){function n(){return F=n.__super__.constructor.apply(this,arguments),F}return t(n,e),n.defaults={type:"Thruster",active:!0,max_v:0,dv:0,dx:0,dy:0},n}(u),d=function(e){function r(){return I=r.__super__.constructor.apply(this,arguments),I}return t(r,e),r.defaults={type:"Orbit",orbited_id:null,rad_per_sec:function(){return n.random(Math.PI/32,Math.PI)},rotate:!0,angle:0},r}(u),w=function(e){function r(){return q=r.__super__.constructor.apply(this,arguments),q}return t(r,e),r.defaults={type:"Spin",rad_per_sec:function(){return n.random(Math.PI/32,Math.PI)}},r}(u),i=function(e){function n(){return R=n.__super__.constructor.apply(this,arguments),R}return t(n,e),n.defaults={type:"Bouncer",mass:10},n}(u),b=function(e){function n(){return U=n.__super__.constructor.apply(this,arguments),U}return t(n,e),n.defaults={type:"Spawn",position_logic:"at",x:0,y:0,rotation:0,ttl:null,destroy:!1,capture_camera:!1},n}(u),x=function(e){function n(){return z=n.__super__.constructor.apply(this,arguments),z}return t(n,e),n.defaults={type:"Tombstone",load:{},components:[]},n}(u),E=function(e){function n(){return A=n.__super__.constructor.apply(this,arguments),A}return t(n,e),n.defaults={type:"Sprite",shape:"sun",stroke_style:"#fff",width:30,height:30},n}(u),g=function(e){function n(){return O=n.__super__.constructor.apply(this,arguments),O}return t(n,e),n.defaults={type:"Renderable"},n}(u),o=function(e){function n(e){n.__super__.constructor.call(this,e),this.in_collision_with={}}return t(n,e),n.defaults={type:"Collidable"},n}(u),y=function(e){function n(){return M=n.__super__.constructor.apply(this,arguments),M}return t(n,e),n.defaults={type:"Seeker",target:null,error:0,acquisition_delay:0,rad_per_sec:0},n}(u),s=function(e){function n(){return _=n.__super__.constructor.apply(this,arguments),_}return t(n,e),n.defaults={type:"ClickCourse",stop_on_arrival:!1,active:!0},n}(u),C=function(e){function n(){return D=n.__super__.constructor.apply(this,arguments),D}return t(n,e),n.defaults={type:"WeaponsTarget",team:"foe"},n}(u),h=function(e){function n(e){var t;n.__super__.constructor.call(this,e),this.turrets=function(){var e,n,r;r=[];for(t=e=1,n=this.max_turrets;1<=n?e<=n:e>=n;t=1<=n?++e:--e)r.push({loading:0,target:null});return r}.call(this)}return t(n,e),n.defaults={type:"MissileWeapon",x:0,y:0,turret_separation:10,max_turrets:12,active_turrets:8,loading_time:1,target_range:1e3,missile:{health:100,damage:1e3,speed:100,ttl:3,color:"#f00",rad_per_sec:Math.PI,acquisition_delay:.5}},n}(u),c=function(e){function n(){return P=n.__super__.constructor.apply(this,arguments),P}return t(n,e),n.defaults={type:"Missile",health:100,damage:1e3,speed:100,ttl:3},n}(u),r=function(e){function n(e){var t;n.__super__.constructor.call(this,e),this.current_stats={max_charge:0,charge_rate:0,discharge_rate:0,beam_range:0,beam_range_sq:0,dmg_penalty:0},this.beams=function(){var e,n,r;r=[];for(t=e=1,n=this.max_beams;1<=n?e<=n:e>=n;t=1<=n?++e:--e)r.push({target:null,x:0,y:0,charging:!0,charge:0});return r}.call(this)}return t(n,e),n.defaults={type:"BeamWeapon",x:0,y:0,max_beams:12,active_beams:4,max_range:150,max_power:150,charge_rate:150,discharge_rate:300,color:"#6f6",target_team:"enemy",dmg_penalty:.2,range_penalty:.8},n}(u),l=function(e){function n(e){n.__super__.constructor.call(this,e),this.current==null&&(this.current=this.max)}return t(n,e),n.defaults={type:"Health",max:1e3,current:null,show_bar:!0},n}(u),f=function(e){function n(e){var t,r,i;n.__super__.constructor.call(this,e),this.particles=[];for(t=r=0,i=this.max_particles-1;0<=i?r<=i:r>=i;t=0<=i?++r:--r)this.particles.push({free:!0,x:0,y:0,dx:0,dy:0,s:0,mr:0})}return t(n,e),n.defaults={type:"Explosion",ttl:2,radius:100,max_particles:100,max_particle_size:4,max_velocity:300,color:"#f00",age:0,stop:!1},n}(u),N=function(e){function n(e){var t;n.__super__.constructor.call(this,e),this.particles=function(){var e,n,r;r=[];for(t=e=0,n=this.history-1;0<=n?e<=n:e>=n;t=0<=n?++e:--e)r.push({x:0,y:0});return r}.call(this)}return t(n,e),n.defaults={type:"VaporTrail",history:20,width:2,skip:3,color:"#ccc"},n}(u),m=function(e){function n(){return H=n.__super__.constructor.apply(this,arguments),H}return t(n,e),n.defaults={type:"RadarPing",color:"#fff"},n}(u),{Component:u,TypeName:T,EntityName:a,Position:v,Motion:p,Orbit:d,Spin:w,Bouncer:i,Spawn:b,Tombstone:x,Collidable:o,Renderable:g,Sprite:E,Thruster:S,Seeker:y,ClickCourse:s,WeaponsTarget:C,BeamWeapon:r,Health:l,Explosion:f,RadarPing:m,MissileWeapon:h,Missile:c,VaporTrail:N}})}).call(this);