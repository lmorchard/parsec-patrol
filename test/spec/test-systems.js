(function(){define(["systems","entities","components","worlds","async"],function(e,t,n,r,i){return suite("Systems",function(){return test("Module should be defined",function(){return assert.isDefined(e)}),suite("SpawnSystem",function(){return setup(function(){return this.world=new r.World,this.spawn_system=new e.SpawnSystem,this.world.addSystem(this.spawn_system)}),test("SpawnSystem should spawn unspawned entities",function(e){var t,r,s,o,u=this;return this.timeout(5e3),r=[],this.world.subscribe(this.spawn_system.constructor.MSG_SPAWN,function(e,t){return r.push(t)}),o=function(){var e,r;r=[];for(t=e=0;e<=3;t=++e)r.push(this.world.entities.create(new n.TypeName("SpawnableEntity"),new n.EntityName("test"+t),new n.Position,new n.Spawn));return r}.call(this),s=function(){var e,r;r=[];for(t=e=4;e<=6;t=++e)r.push(this.world.entities.create(new n.TypeName("NoSpawnEntity"),new n.EntityName("test"+t)));return r}.call(this),i.waterfall([function(e){return assert.equal(r.length,0),u.world.tick(10),e()},function(e){var t,i,a,f,l,c,h;assert.equal(r.length,4);for(i=0,f=o.length;i<f;i++)t=o[i],assert.ok((c=u.world.entities.get(t,n.Spawn))!=null?c.spawned:void 0);for(a=0,l=s.length;a<l;a++)t=s[a],assert.ok((h=u.world.entities.get(t,n.Spawn))!=null?!h.spawned:!void 0);return r.length=0,u.world.tick(10),e()},function(e){return assert.equal(r.length,0),e()}],e)})})})})}).call(this);